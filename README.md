# ChemREL

Automate and transfer chemical data extraction using span categorization and relation extraction models.

## Introduction

ChemREL is a PIP package that allows you to train chemical data extraction models with ease using a suite of models,
configurations, and data processing methods. ChemREL consists of a command line interface (CLI) through which you can
run various commands, as well as a collection of different functions that you can import into your own code.

When utilizing or sharing the dataset and models, kindly note they are governed under the CC BY NC 4.0 license as imposed by software and data mining guidelines, permitting only non-commercial applications. They should exclusively be used for research. Any alterations to the models, datasets, or methods must be properly attributed with the following: [ChemREL citation](#Citation)

Content

### Documentation

To install and set up ChemREL, see the [Setup](#setup) section of this file. The following are also provided as
additional documentation.

+ [ChemREL CLI Reference](chemrel/README.md) - Complete documentation of all available CLI commands.
+ [ChemREL Methods Reference](https://hl3c.github.io/ChemREL) - Complete documentation of ChemREL Python methods which
are intended to be importable in your own code.
+ [Toy Jupyter Notebook](toy_notebook.ipynb) - Jupyter notebook demonstrating usage of importable prediction functions.

## Setup
ChemREL can be installed via the command line from the PyPI index using the `pip install` command. Once installed, the
ChemREL CLI can be invoked from any directory in the command line using the `chemrel` command (but you should `cd` into
the proper directory first, as described below).

### Virtual Environment

To ensure that the `chemrel` keyword is recognized by your system, it is recommended that you create a new virtual
environment before installing ChemREL. To do so, open the command line and run the following.
```console
python -m venv venv
```

Next, activate the environment by running 
```console
source venv/bin/activate
```
if using a MacOS (unix-like) or Linux machine, or
```console
venv\Scripts\activate
```
if using a Windows machine. Your virtual environment should now be active, and the prompt in the command line should be 
prefaced by the name of your environment, `venv`.

### GPU Commands

If you plan to use ChemREL CLI commands to train on a CUDA-enabled GPU, you should install versions of Spacy and PyTorch
which have been compiled with CUDA enabled before installing ChemREL. To do so, within the command line and within your
virtual environment, run the installation commands generated by the 
[PyTorch quickstart site](https://pytorch.org/get-started/locally/) and the
[Spacy quickstart site](https://spacy.io/usage) after selecting your applicable preferences. Once the PyTorch and Spacy 
installations have been completed, proceed to the next step.

Note: If you do not install versions CUDA-enabled versions of Spacy and PyTorch before installing ChemREL, all GPU-related commands will fail.

### Installation

Now, to install ChemREL in the environment, run the following.
```console
pip install chemrel
```

Next, run the following to ensure that ChemREL has been properly installed. A help prompt should display.
```console
chemrel --help
```

Before running any model-related commands, ChemREL must be initialized by downloading all necessary model and config
files required by the package. To download the files to your desired directory, first enter the directory where you wish
to save the files by running the `cd` command in the command line as follows, where `[PATH]` should be replaced
with the directory path of your desired location. Note that you will need to `cd` into this directory before using
ChemREL in the future.
```console
cd [PATH]
```
You can then run the `pwd` command to print the path you have entered to verify that you are in the correct directory.

Next, run the following command to download the required files. The files will be downloaded in the folder path you
previously entered. This may take a while to complete.
```console
chemrel init
```
Note: You can also install the files to a path relative to the currently focused directory by passing an additional
argument into the command, e.g. `chemrel init [ALTERNATE PATH]`.

Note for Windows installations: If the `chemrel init` command hangs while downloading required files, you can
alternatively clone the contents of the
[`chemrelmodels` Hugging Face repository](https://huggingface.co/AbdulelahAlshehri/chemrelmodels/tree/main) to the same 
directory.

Once the initialization is complete, you are ready to begin using ChemREL.

## Usage

### Calling the CLI

Before using any ChemREL CLI commands, always make sure to `cd` into the directory in which you initialized ChemREL as
follows, where `[PATH]` is the directory path in which you originally ran the `chemrel init` command.
```console
cd [PATH]
```
Otherwise, the necessary files will not be visible to the program.

To print the help text for any command or subcommand, simply enter the desired command followed by the `--help` flag.
For example, the following will print the help text for the `chemrel predict` command.
```console
chemrel predict --help
```

View the [ChemREL CLI Reference](chemrel/README.md) for a full list of available CLI commands.

### Importing Methods

In addition to the CLI, the ChemREL PIP package exposes a number of functions which can be imported from within your own
code.
You must first import the specific submodule containing your desired function from the `functions` package. For example,
to import the `auxiliary` submodule, run the following line.
```python
from chemrel.functions import auxiliary
```

You can then reference any available functions within the `auxiliary` submodule. For example, to call the
`extract_paper()` function, you can run the following.
```python
paper = auxiliary.extract_paper("/example/paper/path")
```

View the [ChemREL Methods Reference](https://hl3c.github.io/ChemREL) for a full list of importable methods.

### 
```
@article{doi,
author = {Alshehri, Abdulelah S. and Horstmann, Kai and You, Fengqi},
title = {A Versatile Deep Learning Pipeline for Transferable Chemical Data Extraction},
journal = {Submitted to Journal of Chemical Information and Modeling},
volume = {n/a},
number = {n/a},
pages = {n/a},
keywords = {},
doi = {https://doi.org/},
url = {},
eprint = {},
abstract = {Abstract}
}

```
